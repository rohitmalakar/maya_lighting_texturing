////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Title: srbSearchNReplace.mel//AUTHOR:	Suchan Raj Bajracharya//				suchan@incessantrain.com		//DATE: 5th, Jan, 2009//DESCRIPTION: This tool is used for searching and replacing names of selected objects...//VERSION: 0.1////////////////////////////////////////////////////////////////////////////////////////////////////////////////////CREATE THE GLOBAL PROCEDURE FOR srbSearchNReplace.mel---global proc srbSearchNReplace ()	{	//CREATE THE WINDOW---	if (`window -exists srbSearchNReplaceWin`) deleteUI srbSearchNReplaceWin;		window		-rtf 1		-title "SRB - Search & Replace v0.1"		srbSearchNReplaceWin;	columnLayout -adj 1;	rowColumnLayout -nc 2 -cw 1 60 -cw 2 260;		text -l "Search: " -al "right";	textField -tx "" srbSearchTF;	text -l "Replace: " -al "right";	textField -tx "" srbReplaceTF;	setParent ..;	button -l "Apply" -c "srbSearchNReplaceProc";	showWindow srbSearchNReplaceWin;}//CREATE THE GLOBAL PROCEDURE FOR SEARCHING AND REPLACING NAMES---global proc srbSearchNReplaceProc ()	{	//LIST AND STORE SELECTED OBJECTS---	string $selObjs[] = `ls -sl`;	int $noSelObjs = size ($selObjs);	string $search = `textField -q -tx srbSearchTF`;	string $replace = `textField -q -tx srbReplaceTF`;	if ($search == "" || $noSelObjs == 0)		{		warning "Enter something to search before proceeding...or...select atleast one object to rename...\n";		}		else		{		for ($i=0; $i < $noSelObjs ; ++$i)			{			string $shortName = getShortName($selObjs[$i]);					string $newShortName = stringReplace($shortName, $search, $replace);			string $newName = `rename $selObjs[$i] $newShortName`;			}		}	print "Completed renaming selected objects...\n";	}//GLOBAL PROCEDURE FOR GETTING THE NAME OF SELECTED OBJECTS---global proc string getShortName(string $obj)	{	string $ret = "";	if ($obj == "")	return $ret;	string $parts[];	int $cnt = tokenize($obj, "|", $parts);    	if ($cnt <= 0)		$ret = $obj;	else		$ret = $parts[($cnt-1)];	return $ret;	}//GLOBAL PROCEDURE FOR REPLACING STRINGS---global proc string stringReplace(string $str, string $search, string $replace)	{	string $retstr = "";	if ($search == "")		return $str;    	if ($str == "")		return $str;        	int $len = size($str);	int $lenS = size($search);    	int $i, $j;	int $match;    	for ($i=1; $i <= $len; ++$i)		{		$match = 0;		$j = $i + ($lenS - 1);		if ($j <= $len)			{			string $part = `substring $str $i $j`;			if ($part == $search)				$match = 1;			}			if ($match == 1)				{				$retstr += $replace; 				$i = $j;					}			else				{				string $char = `substring $str $i $i`;				$retstr += $char;				}			}		return $retstr;	}//THE END---